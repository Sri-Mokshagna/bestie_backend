# Deployment Checklist for Render.com

## ‚úÖ Files Ready
- [x] `package.json` - Dependencies defined
- [x] `Procfile` - Start command
- [x] `render.yaml` - Render configuration
- [x] `Dockerfile` - Docker configuration (optional)
- [x] `tsconfig.json` - TypeScript configuration (relaxed for deployment)
- [x] All TypeScript errors fixed

## üîß Pre-Deployment Steps

### 1. Test Build Locally
```bash
cd d:/Dost/bestie/server
npm install
npm run build
npm start
```

### 2. Push to GitHub
```bash
git add .
git commit -m "Ready for deployment"
git push origin main
```

## üöÄ Deploy on Render.com

### Step 1: Create Account
- Go to https://render.com
- Sign up with GitHub

### Step 2: Create Web Service
1. Click "New +" ‚Üí "Web Service"
2. Connect your GitHub repository
3. Select `bestie-server` repo

### Step 3: Configure Service
- **Name:** `bestie-backend`
- **Environment:** `Node`
- **Region:** `Singapore` (or closest to your users)
- **Branch:** `main`
- **Build Command:** `npm install && npm run build`
- **Start Command:** `npm start`
- **Plan:** `Free`

### Step 4: Add Environment Variables

Copy these from your `.env` file:

```env
NODE_ENV=production
PORT=3000

# MongoDB (use MongoDB Atlas for production)
MONGODB_URI=mongodb+srv://user1:User1%4007@cluster0.k89m9se.mongodb.net/bestie?retryWrites=true&w=majority&appName=Cluster0

# JWT (Render will auto-generate these)
JWT_SECRET=<auto-generated>
JWT_REFRESH_SECRET=<auto-generated>

# Firebase
FIREBASE_PROJECT_ID=bestie-d4cd9
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-fbsvc@bestie-d4cd9.iam.gserviceaccount.com
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"

# ZegoCloud
ZEGO_APP_ID=839456615
ZEGO_SERVER_SECRET=<your-zego-server-secret>

# Cloudinary
CLOUDINARY_CLOUD_NAME=<your-cloudinary-name>
CLOUDINARY_API_KEY=<your-cloudinary-key>
CLOUDINARY_API_SECRET=<your-cloudinary-secret>

# Razorpay
RAZORPAY_KEY_ID=<your-razorpay-key>
RAZORPAY_KEY_SECRET=<your-razorpay-secret>

# Redis (disable for free tier)
REDIS_ENABLED=false

# CORS
CORS_ORIGIN=*
```

### Step 5: Deploy
- Click "Create Web Service"
- Wait for build to complete (5-10 minutes)
- Your backend will be live at: `https://bestie-backend.onrender.com`

## üì± Update Flutter App

After deployment, update your Flutter app's `env.dart`:

```dart
static const String apiBaseUrl = 'https://bestie-backend.onrender.com';
static const String socketUrl = 'https://bestie-backend.onrender.com';
```

## ‚úÖ Verify Deployment

### Test Health Endpoint
```bash
curl https://bestie-backend.onrender.com/healthz
```

Should return:
```json
{"status":"ok","timestamp":"2024-..."}
```

### Test from Flutter App
1. Update `env.dart` with deployed URL
2. Rebuild app: `flutter run`
3. Try login/registration
4. Test calling feature

## üêõ Troubleshooting

### Build Fails
- Check Render logs
- Verify all environment variables are set
- Ensure `FIREBASE_PRIVATE_KEY` has quotes

### App Can't Connect
- Verify URL in `env.dart`
- Check CORS settings
- Ensure MongoDB Atlas allows connections from anywhere (0.0.0.0/0)

### Database Connection Error
- MongoDB Atlas: Add IP whitelist `0.0.0.0/0`
- Verify `MONGODB_URI` is correct
- Check MongoDB Atlas cluster is running

## üìä Free Tier Limitations

Render Free Tier:
- ‚úÖ 750 hours/month
- ‚úÖ Automatic HTTPS
- ‚ö†Ô∏è Spins down after 15 min inactivity
- ‚ö†Ô∏è First request after spin-down takes 30-60 seconds

## üéâ Success!

Once deployed:
- ‚úÖ Backend accessible from anywhere
- ‚úÖ Multiple devices can connect
- ‚úÖ No firewall issues
- ‚úÖ HTTPS secure
- ‚úÖ Professional setup

Your app is now ready for production testing! üöÄ
